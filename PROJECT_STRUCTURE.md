# ğŸŒ² å®Œæ•´é¡¹ç›®ç›®å½•æ ‘

```
platetray_hours_calculator_nextjs/
â”œâ”€â”€ ğŸ“‹ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ next.config.ts              # Next.js é…ç½® (å«Serwist PWA)
â”‚   â”œâ”€â”€ vercel.json                 # Vercel éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ package.json                # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
â”‚   â”œâ”€â”€ package-lock.json           # ä¾èµ–ç‰ˆæœ¬é”å®š
â”‚   â”œâ”€â”€ yarn.lock                   # Yarn ä¾èµ–é”å®š
â”‚   â”œâ”€â”€ tsconfig.json               # TypeScript é…ç½®
â”‚   â”œâ”€â”€ tailwind.config.js          # Tailwind CSS é…ç½®
â”‚   â”œâ”€â”€ postcss.config.mjs          # PostCSS é…ç½®
â”‚   â”œâ”€â”€ vitest.config.ts            # Vitest æµ‹è¯•é…ç½®
â”‚   â”œâ”€â”€ playwright.config.ts        # Playwright E2E é…ç½®
â”‚   â”œâ”€â”€ setupTests.ts               # æµ‹è¯•ç¯å¢ƒè®¾ç½®
â”‚   â”œâ”€â”€ middleware.ts               # Next.js ä¸­é—´ä»¶ (å«AdSenseä¼˜åŒ–CSP)
â”‚   â””â”€â”€ next-env.d.ts               # Next.js ç±»å‹å®šä¹‰
â”‚
â”œâ”€â”€ ğŸ“ æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md                   # é¡¹ç›®ä¸»æ–‡æ¡£
â”‚   â”œâ”€â”€ CLAUDE.md                   # AI åŠ©æ‰‹å·¥ä½œæŒ‡å—
â”‚   â”œâ”€â”€ PROJECT_STRUCTURE.md        # é¡¹ç›®ç»“æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ LICENSE                     # å¼€æºè®¸å¯è¯
â”‚   â””â”€â”€ docs/                       # è¯¦ç»†æ–‡æ¡£ç›®å½•
â”‚       â”œâ”€â”€ DEPLOYMENT_FLOW.md      # éƒ¨ç½²æµç¨‹æ–‡æ¡£
â”‚       â”œâ”€â”€ PRODUCTION_FIX_GUIDE.md # ç”Ÿäº§ç¯å¢ƒä¿®å¤æŒ‡å—
â”‚       â”œâ”€â”€ diagrams-overview.md    # æ¶æ„å›¾è¡¨æ¦‚è§ˆ
â”‚       â”œâ”€â”€ component-architecture-diagram.md
â”‚       â”œâ”€â”€ data-flow-diagram.md
â”‚       â”œâ”€â”€ sequence-diagram.md
â”‚       â”œâ”€â”€ user-flow-diagram.md
â”‚       â””â”€â”€ timezone-gotcha.md      # æ—¶åŒºå¤„ç†æ³¨æ„äº‹é¡¹
â”‚
â”œâ”€â”€ ğŸ› ï¸ è„šæœ¬å·¥å…·
â”‚   â””â”€â”€ scripts/
â”‚       â”œâ”€â”€ force-precompute-today.ts      # å¼ºåˆ¶ç”Ÿæˆå½“æ—¥é¢„è®¡ç®—
â”‚       â”œâ”€â”€ compress-blog-images.ts        # åšå®¢å›¾ç‰‡å‹ç¼©
â”‚       â””â”€â”€ clean-blog-image-artifacts.ts  # æ¸…ç†å›¾ç‰‡ç¼“å­˜
â”‚
â”œâ”€â”€ ğŸŒ é™æ€èµ„æº
â”‚   â””â”€â”€ public/
â”‚       â”œâ”€â”€ precomputed/            # é¢„è®¡ç®—æ•°æ®æ–‡ä»¶
â”‚       â”‚   â””â”€â”€ ny-2025-07-12.json  # çº½çº¦å½“æ—¥é¢„è®¡ç®—æ•°æ®
â”‚       â”œâ”€â”€ images/                 # å›¾ç‰‡èµ„æº
â”‚       â”‚   â””â”€â”€ blog/               # åšå®¢å›¾ç‰‡
â”‚       â”‚       â”œâ”€â”€ algorithm-behind-calculator.{jpg,webp,avif,blur.jpg}
â”‚       â”‚       â”œâ”€â”€ planetary-hours-intro.{jpg,webp,avif,blur.jpg}
â”‚       â”‚       â”œâ”€â”€ using-planetary-hours.{jpg,webp,avif,blur.jpg}
â”‚       â”‚       â””â”€â”€ what-are-planetary-hours.{jpg,webp,avif,blur.jpg}
â”‚       â”œâ”€â”€ favicon.ico             # ç½‘ç«™å›¾æ ‡
â”‚       â”œâ”€â”€ favicon-{16x16,32x32}.png
â”‚       â”œâ”€â”€ apple-touch-icon.png
â”‚       â”œâ”€â”€ android-chrome-{192x192,512x512}.png
â”‚       â”œâ”€â”€ android-chrome-512x512-maskable.png
â”‚       â”œâ”€â”€ og-image.jpg            # Open Graph å›¾ç‰‡
â”‚       â”œâ”€â”€ icon_source.png         # å›¾æ ‡æºæ–‡ä»¶
â”‚       â”œâ”€â”€ manifest.json           # PWA æ¸…å•æ–‡ä»¶
â”‚       â”œâ”€â”€ site.webmanifest        # Web åº”ç”¨æ¸…å•
â”‚       â”œâ”€â”€ sw.js                   # Service Worker
â”‚       â”œâ”€â”€ robots.txt              # æœç´¢å¼•æ“çˆ¬è™«è§„åˆ™
â”‚       â””â”€â”€ ads.txt                 # å¹¿å‘ŠéªŒè¯æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ’» æºä»£ç 
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ ğŸ  åº”ç”¨å…¥å£
â”‚       â”‚   â””â”€â”€ app/                # Next.js App Router
â”‚       â”‚       â”œâ”€â”€ layout.tsx      # æ ¹å¸ƒå±€ç»„ä»¶
â”‚       â”‚       â”œâ”€â”€ page.tsx        # é¦–é¡µ
â”‚       â”‚       â”œâ”€â”€ globals.css     # å…¨å±€æ ·å¼
â”‚       â”‚       â”œâ”€â”€ error.tsx       # é”™è¯¯é¡µé¢
â”‚       â”‚       â”œâ”€â”€ not-found.tsx   # 404 é¡µé¢
â”‚       â”‚       â”œâ”€â”€ sitemap.ts      # ç«™ç‚¹åœ°å›¾
â”‚       â”‚       â”œâ”€â”€ sw.ts           # Serwist Service Worker (å«AdSenseä¼˜åŒ–)
â”‚       â”‚       â”œâ”€â”€ CalculatorServer.tsx        # æœåŠ¡ç«¯è®¡ç®—å™¨ç»„ä»¶
â”‚       â”‚       â”œâ”€â”€ CalculatorPageOptimized.tsx # ä¼˜åŒ–çš„å®¢æˆ·ç«¯é¡µé¢
â”‚       â”‚       â”œâ”€â”€ about/page.tsx              # å…³äºé¡µé¢
â”‚       â”‚       â”œâ”€â”€ privacy/page.tsx            # éšç§æ”¿ç­–
â”‚       â”‚       â”œâ”€â”€ terms/page.tsx              # æœåŠ¡æ¡æ¬¾
â”‚       â”‚       â”œâ”€â”€ debug/page.tsx              # è°ƒè¯•é¡µé¢
â”‚       â”‚       â”œâ”€â”€ blog/                       # åšå®¢ç³»ç»Ÿ
â”‚       â”‚       â”‚   â”œâ”€â”€ page.tsx                # åšå®¢é¦–é¡µ
â”‚       â”‚       â”‚   â””â”€â”€ [slug]/                 # åŠ¨æ€åšå®¢é¡µé¢
â”‚       â”‚       â”‚       â”œâ”€â”€ page.tsx
â”‚       â”‚       â”‚       â””â”€â”€ not-found.tsx
â”‚       â”‚       â””â”€â”€ api/                        # API è·¯ç”±
â”‚       â”‚           â”œâ”€â”€ cron/                   # å®šæ—¶ä»»åŠ¡ API
â”‚       â”‚           â”‚   â”œâ”€â”€ force-precompute-today/route.ts
â”‚       â”‚           â”‚   â””â”€â”€ revalidate/route.ts
â”‚       â”‚           â””â”€â”€ maps/                   # Google Maps API
â”‚       â”‚               â”œâ”€â”€ autocomplete/route.ts
â”‚       â”‚               â”œâ”€â”€ geocode/route.ts
â”‚       â”‚               â”œâ”€â”€ placeDetails/route.ts
â”‚       â”‚               â”œâ”€â”€ timezone/route.ts
â”‚       â”‚               â””â”€â”€ session/start/route.ts
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ§© ç»„ä»¶åº“
â”‚       â”‚   â””â”€â”€ components/
â”‚       â”‚       â”œâ”€â”€ Calculator/          # è®¡ç®—å™¨æ ¸å¿ƒç»„ä»¶
â”‚       â”‚       â”‚   â”œâ”€â”€ CalculatorClient.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ CurrentHourDisplay.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ DateTimeInput.{tsx,css}
â”‚       â”‚       â”‚   â”œâ”€â”€ EnhancedLocationInput.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ HourItem.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ HoursList.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ LocationInput.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ SuggestionBar.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ TimeFormatToggle.tsx
â”‚       â”‚       â”‚   â””â”€â”€ WeekNavigation.tsx
â”‚       â”‚       â”œâ”€â”€ Layout/              # å¸ƒå±€ç»„ä»¶
â”‚       â”‚       â”‚   â”œâ”€â”€ Header.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ Footer.tsx
â”‚       â”‚       â”‚   â””â”€â”€ OptimizedLink.tsx
â”‚       â”‚       â”œâ”€â”€ UI/                  # é€šç”¨ UI ç»„ä»¶
â”‚       â”‚       â”‚   â”œâ”€â”€ BackToTop.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ EnhancedDatePicker.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ ErrorMessage.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ NetworkError{,Message}.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ PageHero.tsx
â”‚       â”‚       â”‚   â””â”€â”€ SkipToContent.tsx
â”‚       â”‚       â”œâ”€â”€ Performance/         # æ€§èƒ½ä¼˜åŒ–ç»„ä»¶ (å·²ç®€åŒ–)
â”‚       â”‚       â”‚   â”œâ”€â”€ FontOptimizer.tsx      # å­—ä½“ä¼˜åŒ– (ç®€åŒ–ç‰ˆ)
â”‚       â”‚       â”‚   â”œâ”€â”€ LayoutStabilizer.tsx   # å¸ƒå±€ç¨³å®šå™¨ (ç®€åŒ–ç‰ˆ)
â”‚       â”‚       â”‚   â””â”€â”€ LazyLoader.tsx         # æ‡’åŠ è½½å·¥å…· (ç®€åŒ–ç‰ˆ)
â”‚       â”‚       â”œâ”€â”€ Skeleton/            # éª¨æ¶å±ç»„ä»¶
â”‚       â”‚       â”‚   â”œâ”€â”€ CurrentHourSkeleton.tsx
â”‚       â”‚       â”‚   â””â”€â”€ HoursListSkeleton.tsx
â”‚       â”‚       â”œâ”€â”€ SEO/                 # SEO ä¼˜åŒ–ç»„ä»¶ (å·²ä¼˜åŒ–)
â”‚       â”‚       â”‚   â”œâ”€â”€ Breadcrumb.tsx         # é¢åŒ…å±‘å¯¼èˆª (å«ç»“æ„åŒ–æ•°æ®)
â”‚       â”‚       â”‚   â””â”€â”€ JsonLd.tsx             # JSON-LDç»„ä»¶ (ç®€åŒ–ç‰ˆ)
â”‚       â”‚       â”œâ”€â”€ Blog/                # åšå®¢ç›¸å…³ç»„ä»¶
â”‚       â”‚       â”‚   â”œâ”€â”€ ArticleHero.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ ArticleLayout.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ ArticleMeta.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ ArticleShare.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ BlogBackToTop.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ BlogPostCard.tsx
â”‚       â”‚       â”‚   â””â”€â”€ RelatedArticles.tsx
â”‚       â”‚       â”œâ”€â”€ Analytics/           # åˆ†æè¿½è¸ªç»„ä»¶ (å«AdSense)
â”‚       â”‚       â”‚   â”œâ”€â”€ AdSense.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ Analytics.tsx
â”‚       â”‚       â”‚   â””â”€â”€ index.ts
â”‚       â”‚       â”œâ”€â”€ FAQ/                 # å¸¸è§é—®é¢˜ç»„ä»¶
â”‚       â”‚       â”‚   â””â”€â”€ FAQSection.tsx
â”‚       â”‚       â”œâ”€â”€ semantic/            # è¯­ä¹‰åŒ–ç»„ä»¶
â”‚       â”‚       â”‚   â”œâ”€â”€ Article.tsx
â”‚       â”‚       â”‚   â”œâ”€â”€ Aside.tsx
â”‚       â”‚       â”‚   â””â”€â”€ Section.tsx
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ”§ æœåŠ¡å±‚
â”‚       â”‚   â””â”€â”€ services/
â”‚       â”‚       â”œâ”€â”€ PlanetaryHoursCalculator.ts  # æ ¸å¿ƒè®¡ç®—å¼•æ“
â”‚       â”‚       â”œâ”€â”€ DateService.ts               # æ—¥æœŸæœåŠ¡
â”‚       â”‚       â””â”€â”€ TimeZoneService.ts           # æ—¶åŒºæœåŠ¡
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ£ React Hooks
â”‚       â”‚   â””â”€â”€ hooks/
â”‚       â”‚       â”œâ”€â”€ usePlanetaryHours.ts         # ä¸»è¦è®¡ç®— Hook
â”‚       â”‚       â”œâ”€â”€ useCurrentLivePlanetaryHour.ts # ç®€åŒ–ç‰ˆå®æ—¶è¡Œæ˜Ÿæ—¶ Hook
â”‚       â”‚       â””â”€â”€ useNetworkOptimization.ts    # ç½‘ç»œè¯·æ±‚ä¼˜åŒ– Hook
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸŒ ä¸Šä¸‹æ–‡
â”‚       â”‚   â””â”€â”€ contexts/
â”‚       â”‚       â””â”€â”€ DateContext.tsx              # æ—¥æœŸçŠ¶æ€ç®¡ç†
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ› ï¸ å·¥å…·å‡½æ•°
â”‚       â”‚   â””â”€â”€ utils/
â”‚       â”‚       â”œâ”€â”€ time.ts                      # æ—¶é—´å¤„ç†å·¥å…·
â”‚       â”‚       â”œâ”€â”€ markdown.ts                  # Markdown å¤„ç†
â”‚       â”‚       â”œâ”€â”€ unified-logger.ts            # ç®€åŒ–ç‰ˆç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ
â”‚       â”‚       â”œâ”€â”€ semantic.ts                  # è¯­ä¹‰åŒ–å·¥å…·
â”‚       â”‚       â”œâ”€â”€ animation.ts                 # åŠ¨ç”»å·¥å…·
â”‚       â”‚       â”œâ”€â”€ planetaryHourFormatters.ts   # è¡Œæ˜Ÿæ—¶æ ¼å¼åŒ–
â”‚       â”‚       â”œâ”€â”€ planetaryHourHelpers.ts      # è¡Œæ˜Ÿæ—¶è¾…åŠ©å‡½æ•°
â”‚       â”‚       â”œâ”€â”€ maps-api-helpers.ts          # Google Maps APIå…¬å…±å·¥å…·
â”‚       â”‚       â”œâ”€â”€ cache/                       # ç¼“å­˜å·¥å…·
â”‚       â”‚       â”‚   â””â”€â”€ dynamicTTL.ts           # åŠ¨æ€TTLç¼“å­˜ç­–ç•¥ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
â”‚       â”‚       â””â”€â”€ seo/                         # SEO å·¥å…·
â”‚       â”‚           â”œâ”€â”€ metadata.ts
â”‚       â”‚           â””â”€â”€ jsonld.ts
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“Š æ•°æ®å’Œé…ç½®
â”‚       â”‚   â”œâ”€â”€ data/                            # æ•°æ®å±‚
â”‚       â”‚   â”‚   â”œâ”€â”€ blogPosts.ts                 # åšå®¢æ–‡ç« æ•°æ®
â”‚       â”‚   â”‚   â”œâ”€â”€ blogDates.json               # åšå®¢æ—¥æœŸæ•°æ®
â”‚       â”‚   â”‚   â”œâ”€â”€ blogRead.json                # åšå®¢é˜…è¯»çŠ¶æ€
â”‚       â”‚   â”‚   â””â”€â”€ staticPageDates.json         # é™æ€é¡µé¢æ—¥æœŸ
â”‚       â”‚   â”œâ”€â”€ constants/                       # å¸¸é‡é…ç½®
â”‚       â”‚   â”‚   â”œâ”€â”€ planetColors.ts              # è¡Œæ˜Ÿé¢œè‰²é…ç½®
â”‚       â”‚   â”‚   â””â”€â”€ popularCities.ts             # çƒ­é—¨åŸå¸‚æ•°æ®
â”‚       â”‚   â”œâ”€â”€ content/blog/                    # åšå®¢å†…å®¹ (Markdown)
â”‚       â”‚   â”‚   â”œâ”€â”€ algorithm-behind-calculator.md
â”‚       â”‚   â”‚   â”œâ”€â”€ introduction.md
â”‚       â”‚   â”‚   â”œâ”€â”€ using-planetary-hours.md
â”‚       â”‚   â”‚   â””â”€â”€ what-are-planetary-hours.md
â”‚       â”‚   â””â”€â”€ config/                          # é…ç½®æ–‡ä»¶
â”‚       â”‚       â””â”€â”€ seo.ts                       # SEO é…ç½®
â”‚       â”‚
â”‚       â””â”€â”€ ğŸ¨ ç±»å‹å®šä¹‰
â”‚           â””â”€â”€ types/
â”‚               â”œâ”€â”€ schema.ts                    # æ•°æ®ç»“æ„ç±»å‹
â”‚               â””â”€â”€ blog.ts                      # åšå®¢ç›¸å…³ç±»å‹
â”‚
â””â”€â”€ ğŸ§ª æµ‹è¯•
    â””â”€â”€ tests/
        â”œâ”€â”€ unit/                        # å•å…ƒæµ‹è¯•
        â”‚   â”œâ”€â”€ phCalculator.spec.ts     # æ ¸å¿ƒè®¡ç®—å™¨æµ‹è¯•
        â”‚   â”œâ”€â”€ dayRuler.spec.ts         # æ—¥æœŸè§„åˆ™æµ‹è¯•
        â”‚   â”œâ”€â”€ timeUtils.spec.ts        # æ—¶é—´å·¥å…·æµ‹è¯•
        â”‚   â””â”€â”€ highLatitude.spec.ts     # é«˜çº¬åº¦è¾¹ç•Œæµ‹è¯•
        â”œâ”€â”€ e2e/                         # ç«¯åˆ°ç«¯æµ‹è¯•
        â”‚   â”œâ”€â”€ ssr.spec.ts              # æœåŠ¡ç«¯æ¸²æŸ“æµ‹è¯•
        â”‚   â”œâ”€â”€ locationSelect.spec.ts   # ä½ç½®é€‰æ‹©æµ‹è¯•
        â”‚   â”œâ”€â”€ timeFormat.spec.ts       # æ—¶é—´æ ¼å¼æµ‹è¯•
        â”‚   â””â”€â”€ hourItemToggle.spec.ts   # æ—¶é—´é¡¹åˆ‡æ¢æµ‹è¯•
        â”œâ”€â”€ getDayRuler.test.ts          # æ—¥æœŸè§„åˆ™ç‹¬ç«‹æµ‹è¯•
        â””â”€â”€ __mocks__/                   # æµ‹è¯•æ¨¡æ‹Ÿæ–‡ä»¶
            â””â”€â”€ styleMock.js
```

## ğŸ“ˆ é¡¹ç›®è§„æ¨¡ç»Ÿè®¡

- **æ€»æ–‡ä»¶æ•°**: ~129 ä¸ªæºæ–‡ä»¶ï¼ˆå·¥å…·å‡½æ•°ä¼˜åŒ–åæœ€ç»ˆæ•°é‡ï¼‰
- **æ ¸å¿ƒç»„ä»¶**: 30+ ä¸ª React ç»„ä»¶
- **API è·¯ç”±**: 7 ä¸ª API ç«¯ç‚¹ï¼ˆä¼˜åŒ–åç§»é™¤health APIï¼‰
- **æµ‹è¯•æ–‡ä»¶**: 9 ä¸ªæµ‹è¯•æ–‡ä»¶ï¼ˆä¼˜åŒ–åå‡å°‘3ä¸ªï¼‰
- **React Hooks**: 3 ä¸ªæ ¸å¿ƒHookï¼ˆä¼˜åŒ–åä»8ä¸ªå‡å°‘åˆ°3ä¸ªï¼‰
- **å·¥å…·å‡½æ•°**: 12 ä¸ªå·¥å…·æ¨¡å—ï¼ˆä¼˜åŒ–åç§»é™¤è¿‡åº¦å·¥ç¨‹åŒ–æ¨¡å—ï¼‰
- **æœåŠ¡å±‚**: 3 ä¸ªæ ¸å¿ƒæœåŠ¡ï¼ˆä¼˜åŒ–åç§»é™¤LocationDateServiceï¼‰
- **é…ç½®æ–‡ä»¶**: 10+ ä¸ªé…ç½®æ–‡ä»¶

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ„å®å†µ

### æŠ€æœ¯æ ˆç°çŠ¶
- **æ¡†æ¶**: Next.js 15 + React 19 + TypeScript 5 + Tailwind CSS v4
- **PWA**: Serwist (ç°ä»£åŒ–Service Workerè§£å†³æ–¹æ¡ˆï¼Œå«AdSenseä¼˜åŒ–)
- **æ„å»º**: Turbopack + LightningCSS + PWA
- **æµ‹è¯•**: Vitest (å•æµ‹) + Playwright (E2E)
- **éƒ¨ç½²**: Vercel (æ³¨æ„ï¼šå·²ç§»é™¤Croné¢„è®¡ç®—ç³»ç»Ÿ)

### PWA & æ€§èƒ½ä¼˜åŒ–ç°çŠ¶
- **Service Worker**: ä½¿ç”¨Serwistæ›¿ä»£next-pwaï¼Œè§£å†³`_ref`ç¼–è¯‘é”™è¯¯
- **AdSenseä¼˜åŒ–**: NetworkOnlyç¼“å­˜ç­–ç•¥ï¼Œç¡®ä¿å¹¿å‘Šæ”¶ç›Šæœ€å¤§åŒ–
- **å®‰å…¨ç­–ç•¥**: CSPä¼˜åŒ–æ”¯æŒAdSenseï¼Œç§»é™¤X-Frame-Optionsé™åˆ¶
- **ç¼“å­˜ç­–ç•¥**: æ™ºèƒ½åˆ†å±‚ç¼“å­˜ï¼ŒAdSenseè¯·æ±‚ç»ä¸ç¼“å­˜
- **ç›‘æ§ç³»ç»Ÿ**: ç®€åŒ–ä¸ºåŸºç¡€æ—¥å¿—è®°å½•ï¼Œç§»é™¤å¤æ‚çš„æ€§èƒ½ç›‘æ§å’ŒWeb Vitalsè¿½è¸ª

### å®é™…è¿è¡Œæ¨¡å¼
**ä¸READMEæè¿°ä¸åŒï¼Œé¡¹ç›®å·²å®Œå…¨ç§»é™¤é¢„è®¡ç®—ç³»ç»Ÿå’ŒCron Jobs**ï¼š

1. **æœåŠ¡ç«¯æ¸²æŸ“(SSR)**: `CalculatorServer.tsx` åœ¨è¯·æ±‚æ—¶å®æ—¶è®¡ç®—æˆ–åŠ è½½æœ¬åœ°é¢„è®¡ç®—æ–‡ä»¶
2. **å®¢æˆ·ç«¯æ°´åˆ**: `CalculatorPageOptimized.tsx` å¤„ç†ç”¨æˆ·äº¤äº’å’ŒåŠ¨æ€è®¡ç®—
3. **ç¼“å­˜ç­–ç•¥**: ä»…å†…å­˜ç¼“å­˜ + æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œæ— Vercel KVå­˜å‚¨

## ğŸ”„ æ•°æ®æµå®é™…æ¶æ„

```
ç”¨æˆ·è¯·æ±‚ â†’ CalculatorServer (SSR)
    â†“
æ£€æŸ¥æœ¬åœ°é¢„è®¡ç®—æ–‡ä»¶ â†’ å­˜åœ¨åˆ™åŠ è½½ï¼Œå¦åˆ™å³æ—¶è®¡ç®—
    â†“
ä¼ é€’æ•°æ®ç»™ CalculatorPageOptimized (CSR)
    â†“
ç”¨æˆ·äº¤äº’è§¦å‘é‡æ–°è®¡ç®— â†’ PlanetaryHoursCalculator (å•ä¾‹)
    â†“
å†…å­˜ç¼“å­˜ç»“æœ â†’ æ¸²æŸ“æ˜¾ç¤º
```

è¿™æ˜¯ä¸€ä¸ªç»“æ„æ¸…æ™°ã€åˆ†å±‚æ˜ç¡®çš„ç°ä»£åŒ– Next.js é¡¹ç›®ï¼Œä»£ç ç»„ç»‡éµå¾ªæœ€ä½³å®è·µï¼Œå…·å¤‡å®Œæ•´çš„æµ‹è¯•è¦†ç›–å’Œæ€§èƒ½ä¼˜åŒ–ã€‚

## ğŸ¯ ç³»ç»Ÿæ¶æ„ä¼˜åŒ–æ€»ç»“ï¼ˆ2025-07-12ï¼‰

### âœ… ç›‘æ§ç³»ç»Ÿä¼˜åŒ–æˆæœ
- **ç§»é™¤6ä¸ªå¤æ‚ç›‘æ§æ–‡ä»¶**: SimpleMonitoringSetupã€performance-monitorã€seo-monitoringç­‰
- **ä¿ç•™æ ¸å¿ƒå•†ä¸šåŠŸèƒ½**: Google Analytics + AdSenseç³»ç»Ÿå®Œæ•´ä¿ç•™  
- **ç®€åŒ–æ—¥å¿—ç³»ç»Ÿ**: unified-loggerä½¿ç”¨å›ºå®šé˜ˆå€¼ï¼Œç§»é™¤åŠ¨æ€é…ç½®ä¾èµ–
- **æå–æœ‰ç”¨åŠŸèƒ½**: å°†ç½‘ç»œè¯·æ±‚å»é‡åŠŸèƒ½ç‹¬ç«‹ä¸ºuseNetworkOptimization Hook

### âœ… APIç³»ç»Ÿä¼˜åŒ–æˆæœ
- **ç§»é™¤è¿‡åº¦å¤æ‚å¥åº·æ£€æŸ¥**: åˆ é™¤95è¡Œå¤æ‚çš„health APIï¼ˆç”Ÿäº§ç¯å¢ƒè¿”å›404ï¼‰
- **åˆ›å»ºå…¬å…±å·¥å…·å‡½æ•°**: maps-api-helpers.tsç»Ÿä¸€é”™è¯¯å¤„ç†ã€æ—¥å¿—è®°å½•ã€è¶…æ—¶è®¾ç½®
- **é‡æ„Maps API**: 4ä¸ªAPIç»Ÿä¸€ä½¿ç”¨å…¬å…±å‡½æ•°ï¼Œå‡å°‘é‡å¤ä»£ç ~200è¡Œ
- **ä¿ç•™æ ¸å¿ƒåŠŸèƒ½**: 7ä¸ªAPIç«¯ç‚¹æ¶µç›–æ‰€æœ‰å¿…è¦åŠŸèƒ½

### âœ… æµ‹è¯•ç³»ç»Ÿä¼˜åŒ–æˆæœ
- **ç§»é™¤è¿‡åº¦å·¥ç¨‹åŒ–æµ‹è¯•**: åˆ é™¤precompute.spec.tså’Œverify.spec.tsï¼ˆå¤æ‚çš„è„šæœ¬æµ‹è¯•ï¼‰
- **æ¶ˆé™¤é‡å¤æµ‹è¯•**: ç§»é™¤highLatitudeFallback.spec.tsï¼ˆä¸å•å…ƒæµ‹è¯•é‡å¤ï¼‰
- **ç®€åŒ–E2Eæµ‹è¯•**: ç®€åŒ–hourItemToggle.spec.tsï¼Œç§»é™¤è¿‡åº¦å¤æ‚çš„ç§»åŠ¨è®¾å¤‡æ¨¡æ‹Ÿ
- **ä¿æŒæ ¸å¿ƒè¦†ç›–**: 9ä¸ªæµ‹è¯•æ–‡ä»¶è¦†ç›–æ‰€æœ‰æ ¸å¿ƒä¸šåŠ¡é€»è¾‘

### âœ… Hookç³»ç»Ÿä¼˜åŒ–æˆæœï¼ˆ2025-07-12ï¼‰
- **ç§»é™¤4ä¸ªå¤æ‚Hook**: useAdvancedPlanetaryTimeClockã€useCrossDateTransitionã€usePreciseTimerã€useUnifiedPlanetaryTime
- **åˆ é™¤æµ‹è¯•ç»„ä»¶**: CrossDateTestComponent.tsxï¼ˆä»…ç”¨äºæµ‹è¯•è¿‡åº¦å¤æ‚åŠŸèƒ½ï¼‰
- **ç®€åŒ–æ ¸å¿ƒHook**: useCurrentLivePlanetaryHourä»292è¡Œç®€åŒ–åˆ°199è¡Œ
- **å‡å°‘ä»£ç é‡**: ~1,500è¡Œå¤æ‚æ—¶é—´å¤„ç†ä»£ç ï¼ˆå‡å°‘71%ï¼‰
- **ä¿æŒæ ¸å¿ƒåŠŸèƒ½**: 100%ä¿ç•™è¡Œæ˜Ÿæ—¶è®¡ç®—å’Œæ˜¾ç¤ºåŠŸèƒ½ï¼Œç”¨æˆ·ä½“éªŒæ— å˜åŒ–

### âœ… SEOå’Œæ€§èƒ½ç»„ä»¶ä¼˜åŒ–æˆæœï¼ˆ2025-07-12ï¼‰
- **åˆ é™¤ç©ºå¿ƒåŒ–ç»„ä»¶**: ResourcePreloader.tsxï¼ˆ73è¡ŒåŠŸèƒ½åŸºæœ¬ç©ºç™½çš„é¢„åŠ è½½å™¨ï¼‰
- **ç®€åŒ–JsonLd.tsx**: ä»107è¡Œå‡å°‘åˆ°62è¡Œï¼Œä¼˜åŒ–å¤šschemaåˆå¹¶é€»è¾‘
- **å¢å¼ºBreadcrumb.tsx**: æ·»åŠ ç»“æ„åŒ–æ•°æ®å’ŒARIAå¯è®¿é—®æ€§æ”¯æŒ
- **ç®€åŒ–FontOptimizer.tsx**: ä»69è¡Œå‡å°‘åˆ°34è¡Œï¼Œä¾èµ–Next.jså†…ç½®ä¼˜åŒ–
- **ä¼˜åŒ–metadata.ts**: ç§»é™¤å†—ä½™å‡½æ•°ï¼Œä»257è¡Œå‡å°‘åˆ°164è¡Œ
- **å¾®è°ƒæ€§èƒ½ç»„ä»¶**: LayoutStabilizerå’ŒLazyLoaderç®€åŒ–å®ç°ï¼Œä¿æŒæ ¸å¿ƒåŠŸèƒ½

### âœ… å·¥å…·å‡½æ•°å’ŒCSSä¼˜åŒ–æˆæœï¼ˆ2025-07-12ï¼‰
- **åˆ é™¤è¿‡åº¦å·¥ç¨‹åŒ–å·¥å…·**: cssOptimization.tsï¼ˆ209è¡Œï¼ŒåŠŸèƒ½ä¸Tailwindé‡å¤ï¼‰
- **ç§»é™¤å¤æ‚ç¼“å­˜å®ç°**: advancedCache.tsï¼ˆ198è¡Œï¼Œé¡¹ç›®ä½¿ç”¨ç®€å•Mapç¼“å­˜ï¼‰
- **æ¸…ç†æµ‹è¯•å·¥å…·**: cacheTestUtils.tsï¼ˆ304è¡Œï¼Œä¸ºå·²ç§»é™¤çš„åŠ¨æ€TTLæµ‹è¯•è®¾è®¡ï¼‰
- **ä¿ç•™æ ¸å¿ƒç¼“å­˜ç­–ç•¥**: dynamicTTL.tsä½œä¸ºæ ¸å¿ƒç¼“å­˜é€»è¾‘ä¿ç•™
- **æ¸…ç†ç©ºç›®å½•**: ç§»é™¤ç©ºçš„performanceç›®å½•
- **ç®€åŒ–å·¥å…·å‡½æ•°æ¶æ„**: ä»16ä¸ªæ¨¡å—å‡å°‘åˆ°13ä¸ªï¼Œç§»é™¤æ— ç”¨æŠ½è±¡

### ğŸ“Š æ•´ä½“æ¶æ„å¤æ‚åº¦è¯„ä¼°  
- **å½“å‰ç³»ç»Ÿæ•°é‡**: 7ä¸ªæ ¸å¿ƒç³»ç»Ÿï¼ˆè®¡ç®—å¼•æ“ã€ç•Œé¢ã€åšå®¢ã€å¹¿å‘Šã€APIã€PWAã€æµ‹è¯•ï¼‰
- **å¤æ‚åº¦ç­‰çº§**: ğŸŸ¢ åˆç† - åŠŸèƒ½å®Œæ•´ä¸å¤æ‚åº¦å¹³è¡¡è‰¯å¥½
- **å•†ä¸šä»·å€¼ä¿ç•™**: 100%ï¼ˆSEOåšå®¢ + AdSenseæ”¶ç›Š + æ ¸å¿ƒåŠŸèƒ½ï¼‰
- **æŠ€æœ¯å€ºåŠ¡å‡å°‘**: æ˜¾è‘—å‡å°‘è¿‡åº¦å·¥ç¨‹åŒ–ç»„ä»¶

### ğŸ“ˆ ä¼˜åŒ–æ•ˆæœç»Ÿè®¡
- **æ–‡ä»¶æ€»æ•°å‡å°‘**: ~21ä¸ªæ–‡ä»¶ï¼ˆä»~150å‡å°‘åˆ°~129ï¼‰
- **ä»£ç è¡Œæ•°å‡å°‘**: ~2,900è¡Œï¼ˆç›‘æ§ç³»ç»Ÿ400è¡Œ + Hookç³»ç»Ÿ1,500è¡Œ + SEOæ€§èƒ½ç»„ä»¶300è¡Œ + å·¥å…·å‡½æ•°700è¡Œï¼‰
- **ç»´æŠ¤å¤æ‚åº¦**: å¤§å¹…é™ä½ï¼ˆç»Ÿä¸€APIå¤„ç†ã€ç®€åŒ–Hookæ¶æ„ã€ç®€åŒ–æµ‹è¯•ç»“æ„ã€ä¼˜åŒ–SEOç»„ä»¶ã€ç²¾ç®€å·¥å…·å‡½æ•°ï¼‰
- **åŠŸèƒ½å®Œæ•´æ€§**: 100%ä¿æŒï¼ˆæ— æ ¸å¿ƒåŠŸèƒ½æŸå¤±ï¼‰
- **SEOè´¨é‡æå‡**: æ”¹è¿›çš„ç»“æ„åŒ–æ•°æ®æ”¯æŒå’Œå¯è®¿é—®æ€§
- **å·¥å…·å‡½æ•°ç®€åŒ–**: ç§»é™¤è¿‡åº¦æŠ½è±¡ï¼Œä¿ç•™å®ç”¨æ ¸å¿ƒåŠŸèƒ½
- **æœåŠ¡å±‚ç²¾ç®€**: ç§»é™¤å†—ä½™çš„LocationDateServiceï¼Œä¿ç•™æ ¸å¿ƒä¸šåŠ¡é€»è¾‘

### ğŸš€ åç»­å»ºè®®
é¡¹ç›®å·²è¾¾åˆ°æœ€ä½³çš„åŠŸèƒ½æ€§ä¸å¯ç»´æŠ¤æ€§å¹³è¡¡ï¼Œä¸å»ºè®®è¿›ä¸€æ­¥ç®€åŒ–ã€‚å½“å‰æ¶æ„é€‚åˆé•¿æœŸç»´æŠ¤å’ŒåŠŸèƒ½æ‰©å±•ã€‚